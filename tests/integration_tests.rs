#![allow(non_snake_case)]
use rug::Float;
use schlandals::*;
use schlandals::Branching::*;
use schlandals::diagrams::dac::dac::Dac;

use std::path::PathBuf;
use tempfile::Builder;
use std::io::Write;

use paste::paste;

macro_rules! test_input_with_branching {
    ($dir:ident, $name:ident, $value:expr, $b:ident) => {
        paste!{
            #[test]
            fn [<search_ $b _ $name>]() {
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, 0.0, schlandals::ApproximateMethod::Bounds).unwrap();
                let expected = Float::with_val(113, $value);
                assert!((expected - sol).abs() < 0.000001);
            }
            
            #[test]
            fn [<compile_ $b _ $name>]() {
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = match compile(PathBuf::from(filename), $b, None, None, 0.0) {
                    Ok(p) => p,
                    Err(_) => Float::with_val(113, 0.0),
                };
                let expected = Float::with_val(113, $value);
                assert!((expected - sol).abs() < 0.000001);
            }

            /*
            #[test]
            fn [<compile_from_file_ $b _ $name>]() {
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let dac = compile(PathBuf::from(filename), $b, None, None, 0.0).unwrap();
                let mut file = Builder::new().prefix("tmp").suffix(".dac").tempfile().unwrap();
                writeln!(file, "{}", dac).unwrap();
                let mut read_dac: Dac<Float> = Dac::from_file(&PathBuf::from(file.path()));
                let sol = read_dac.evaluate();
                let expected = Float::with_val(113, $value);
                assert!((expected - sol).abs() < 0.000001);
            }
            */
        }
    }
}

fn compare_approximate(sol: Float, expected: Float, epsilon: f64) {
    let lb = ((expected.clone()) / (1.0 + epsilon)) - 0.000001;
    let ub = (expected * (1.0 + epsilon)) + 0.000001;
    assert!(lb <= sol && sol <= ub);
}

macro_rules! test_approximate_input_with_branching {
    ($dir:ident, $name:ident, $value:expr, $b:ident) => {
        paste! {

            #[test]
            fn [<approximate_search_5_ $b _ $name>]() {
                let epsilon = 0.1;
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, epsilon, schlandals::ApproximateMethod::Bounds).unwrap();
                let expected = Float::with_val(113, $value);
                compare_approximate(sol, expected, epsilon);
            }

            #[test]
            fn [<approximate_search_20_ $b _ $name>]() {
                let epsilon = 0.2;
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, epsilon, schlandals::ApproximateMethod::Bounds).unwrap();
                let expected = Float::with_val(113, $value);
                compare_approximate(sol, expected, epsilon);
            }

            #[test]
            fn [<approximate_search_50_ $b _ $name>]() {
                let epsilon = 0.5;
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, epsilon, schlandals::ApproximateMethod::Bounds).unwrap();
                let expected = Float::with_val(113, $value);
                compare_approximate(sol, expected, epsilon);
            }

            #[test]
            fn [<lds_5_ $b _ $name>]() {
                let epsilon = 0.1;
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, epsilon, schlandals::ApproximateMethod::LDS).unwrap();
                let expected = Float::with_val(113, $value);
                compare_approximate(sol, expected, epsilon);
            }

            #[test]
            fn [<lds_20_ $b _ $name>]() {
                let epsilon = 0.2;
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, epsilon, schlandals::ApproximateMethod::LDS).unwrap();
                let expected = Float::with_val(113, $value);
                compare_approximate(sol, expected, epsilon);
            }

            #[test]
            fn [<lds_50_ $b _ $name>]() {
                let epsilon = 0.5;
                let filename = format!("tests/instances/{}/{}.cnf", stringify!($dir), stringify!($name));
                let sol = search(PathBuf::from(filename), Branching::$b, false, None, epsilon, schlandals::ApproximateMethod::LDS).unwrap();
                let expected = Float::with_val(113, $value);
                compare_approximate(sol, expected, epsilon);
            }
        }
    }
}

macro_rules! integration_tests {
    ($dir:ident, $($name:ident: $value:expr,)*) => {
        $(
            test_input_with_branching!{$dir, $name, $value, MinInDegree}
            //test_input_with_branching!{$dir, $name, $value, MinOutDegree}
            //test_input_with_branching!{$dir, $name, $value, MaxDegree}
        )*
        $(
            test_approximate_input_with_branching!{$dir, $name, $value, MinInDegree}
            //test_approximate_input_with_branching!{$dir, $name, $value, MinOutDegree}
            //test_approximate_input_with_branching!{$dir, $name, $value, MaxDegree}
        )*
    }
}

integration_tests! {
    bayesian_networks,
    abc_chain_a0: 0.2_f64,
    abc_chain_a1: 0.8_f64,
    abc_chain_b0: 0.38_f64,
    abc_chain_b1: 0.62_f64,
    abc_chain_c0: 0.348_f64,
    abc_chain_c1: 0.652_f64,
    two_parents_p1_true: 0.2_f64,
    two_parents_p1_false: 0.8_f64,
    two_parents_p2_true: 0.6_f64,
    two_parents_p2_false: 0.4_f64,
    two_parents_child_true: 0.396_f64,
    two_parents_child_false: 0.604_f64,
    two_parents_great_children_d_true: 0.6792_f64,
    two_parents_great_children_d_false: 0.3208_f64,
    two_parents_great_children_e_true: 0.5188_f64,
    two_parents_great_children_e_false: 0.4812_f64,
    hailfinder_43:0.266557374,
    hailfinder_24:0.4645245901,
    hailfinder_22:0.22497458709999998,
    hailfinder_12:0.3323893471,
    hailfinder_17:0.367128693,
    hailfinder_10:0.1050336076,
    hailfinder_23:0.16855737490000003,
    hailfinder_4:0.1488188516,
    hailfinder_11:0.2533049181,
    hailfinder_30:0.11202786749999999,
    hailfinder_44:0.21296311850000002,
    hailfinder_53:0.1259418002,
    hailfinder_8:0.18004754060000003,
    hailfinder_13:0.2454508202,
    hailfinder_15:0.19814016240000004,
    hailfinder_32:0.19043033309999993,
    hailfinder_29:0.13933032389999997,
    hailfinder_36:0.16471803090000003,
    hailfinder_33:0.19256147549999997,
    hailfinder_21:0.14194344790000002,
    hailfinder_52:0.1672401608,
    hailfinder_35:0.16683196629999997,
    hailfinder_50:0.22296311550000003,
    hailfinder_47:0.26833853050000006,
    hailfinder_40:0.15692213400000002,
    hailfinder_18:0.2958467229,
    hailfinder_41:0.14641065739999998,
    hailfinder_20:0.3494459032,
    hailfinder_31:0.1281278722,
    hailfinder_37:0.1522581983,
    hailfinder_25:0.30096311200000003,
    hailfinder_48:0.5276147509,
    hailfinder_5:0.16698032929999998,
    hailfinder_7:0.09575082029999998,
    hailfinder_6:0.1667221324,
    hailfinder_54:0.13899508470000002,
    hailfinder_26:0.34981147850000005,
    hailfinder_46:0.22198114980000003,
    hailfinder_27:0.34922540950000003,
    hailfinder_9:0.1366467182,
    hailfinder_39:0.3295532809,
    hailfinder_34:0.07400491949999999,
    hailfinder_45:0.29671720120000006,
    hailfinder_38:0.1866385236,
    hailfinder_42:0.4301098346,
    hailfinder_16:0.4347311446,
    hailfinder_49:0.4723852491,
    hailfinder_28:0.1635172083,
    hailfinder_14:0.1688549146,
    hailfinder_55:0.16141803940000002,
    hailfinder_51:0.1834417994,
    hailfinder_19:0.3547073739,
    child_12:0.298490221753424,
    child_17:0.743480924570115,
    child_10:0.2565046533936,
    child_4:0.4886932367511675,
    child_11:0.24757780881298372,
    child_8:0.15498136570437,
    child_13:0.21606916843522153,
    child_3:0.3714316465155469,
    child_15:0.1546524267497646,
    child_18:0.6489918355500001,
    child_2:0.7133313761225,
    child_20:0.17148510286900004,
    child_5:0.13987511673328576,
    child_7:0.49225850221357303,
    child_6:0.352760132082057,
    child_1:0.28666862387750003,
    child_9:0.7434953466064,
    child_16:0.256519075429885,
    child_14:0.0832103742486062,
    child_19:0.17952306158100004,
    insurance_17:0.5768135184898001,
    insurance_8:0.30350000000000005,
    insurance_13:0.9688255442598437,
    insurance_15:0.009325872323355081,
    insurance_18:0.1191029949492,
    insurance_2:0.9561999999999999,
    insurance_7:0.6965,
    insurance_1:0.043800000000000006,
    insurance_16:0.006217277718801594,
    insurance_14:0.01563130569799954,
    insurance_19:0.304083486561,
    survey_3:0.15730877199999999,
    survey_2:0.280857252,
    survey_1:0.5618339760000001,
    pathfinder_168:0.9682622268351879,
    pathfinder_238:0.9860369727137789,
    pathfinder_201:0.0010581057106475856,
    pathfinder_183:0.9988503840844885,
    pathfinder_228:0.4995860050224198,
    pathfinder_22:0.024714451630738855,
    pathfinder_59:0.08347166699585001,
    pathfinder_175:0.9947176796984695,
    pathfinder_214:0.007470431775887049,
    pathfinder_182:0.0008300479750985608,
    pathfinder_17:0.009320366650919001,
    pathfinder_145:0.030452378646428645,
    pathfinder_120:0.13761363785219924,
    pathfinder_123:0.010000387854340095,
    pathfinder_143:0.33041131408614943,
    pathfinder_184:0.0011496159155115222,
    pathfinder_115:0.002957045911288622,
    pathfinder_32:0.00023863729284088125,
    pathfinder_171:0.0011870517019832488,
    pathfinder_125:0.012649642644507427,
    pathfinder_133:0.08619350323091253,
    pathfinder_269:0.14031965440041036,
    pathfinder_122:0.4024382711268518,
    pathfinder_191:0.14436311648196376,
    pathfinder_181:0.9991699520249014,
    pathfinder_169:0.02227223845413535,
    pathfinder_197:0.8256830682238441,
    pathfinder_268:0.19361385863658423,
    pathfinder_241:0.01366732269509222,
    pathfinder_132:0.5890717141220134,
    pathfinder_61:0.00020750999377470018,
    pathfinder_86:0.0025938999221830025,
    pathfinder_174:0.018676070439717887,
    pathfinder_2:0.007470431775887047,
    pathfinder_37:0.003147365034579049,
    pathfinder_25:0.020751189377464316,
    pathfinder_75:0.01037559968873201,
    pathfinder_272:0.10219962593401123,
    pathfinder_218:0.9320917265372483,
    pathfinder_158:0.002075119937746402,
    pathfinder_208:0.09017348806427057,
    pathfinder_219:0.0679082734627518,
    pathfinder_54:0.006163106215106813,
    pathfinder_194:0.002494447844264619,
    pathfinder_1:0.992529568224113,
    pathfinder_172:0.004098361877049144,
    pathfinder_199:0.036521623433770065,
    pathfinder_255:0.006702846112675703,
    pathfinder_117:0.008300479750985608,
    pathfinder_207:0.0015563399533098014,
    pathfinder_180:0.008217474953475752,
    pathfinder_216:0.06915024933876754,
    pathfinder_212:0.0028304625150861245,
    pathfinder_276:0.7757326114280216,
    pathfinder_153:0.006783511748494649,
    pathfinder_192:0.12865303597582894,
    pathfinder_105:0.031202363268610346,
    pathfinder_19:0.7852137981060048,
    pathfinder_170:0.004180121131644367,
    alarm_24:0.0313643748352,
    alarm_22:0.7151850570054399,
    alarm_23:0.06239805721408,
    alarm_4:0.731104,
    alarm_30:0.25382320256,
    alarm_8:0.20693,
    alarm_3:0.11434100000000001,
    alarm_32:0.507944100096,
    alarm_29:0.027214453568,
    alarm_21:0.03469812600832001,
    alarm_18:0.043227342068881416,
    alarm_2:0.9455,
    alarm_20:0.05730683837218202,
    alarm_31:0.211018243776,
    alarm_25:0.19105251094528003,
    alarm_5:0.154555,
    alarm_7:0.6787289999999999,
    alarm_6:0.11434100000000001,
    alarm_26:0.049600000000000005,
    alarm_1:0.05450000000000001,
    alarm_27:0.8929,
    alarm_28:0.0575,
    alarm_19:0.8647676935506166,
    pigs_356:0.5,
    pigs_344:0.5,
    pigs_24:0.25,
    pigs_418:0.25,
    pigs_168:0.2578125,
    pigs_254:0.5,
    pigs_70:0.25,
    pigs_201:0.25,
    pigs_183:0.25,
    pigs_229:0.25,
    pigs_397:0.25,
    pigs_84:0.25,
    pigs_22:0.25,
    pigs_12:0.25,
    pigs_59:0.5,
    pigs_381:0.25,
    pigs_329:0.5,
    pigs_267:0.25,
    pigs_175:0.25,
    pigs_214:0.25,
    pigs_182:0.5,
    pigs_17:0.5,
    pigs_83:0.5,
    pigs_204:0.25,
    pigs_205:0.25,
    pigs_121:0.2578125,
    pigs_274:0.25,
    pigs_346:0.25,
    pigs_421:0.25,
    pigs_406:0.25,
    pigs_101:0.5,
    pigs_10:0.25,
    pigs_163:0.2578125,
    pigs_395:0.5,
    pigs_420:0.25,
    pigs_23:0.5,
    pigs_365:0.5,
    pigs_377:0.5,
    pigs_154:0.25,
    pigs_60:0.25,
    pigs_129:0.25,
    pigs_4:0.25,
    pigs_147:0.265625,
    pigs_77:0.5,
    pigs_104:0.5,
    pigs_256:0.25,
    pigs_57:0.25,
    pigs_134:0.5,
    pigs_302:0.5,
    pigs_282:0.25,
    pigs_138:0.25,
    pigs_233:0.5,
    pigs_354:0.25,
    pigs_303:0.25,
    pigs_11:0.5,
    pigs_123:0.2578125,
    pigs_30:0.25,
    pigs_143:0.5,
    pigs_184:0.25,
    pigs_91:0.25,
    pigs_224:0.5,
    pigs_295:0.25,
    pigs_67:0.25,
    pigs_408:0.25,
    pigs_283:0.25,
    pigs_166:0.2578125,
    pigs_53:0.5,
    pigs_130:0.25,
    pigs_110:0.5,
    pigs_387:0.25,
    pigs_392:0.5,
    pigs_263:0.5,
    pigs_252:0.265625,
    pigs_308:0.484375,
    pigs_210:0.25,
    pigs_342:0.25,
    pigs_285:0.25,
    pigs_81:0.25,
    pigs_287:0.5,
    pigs_348:0.25,
    pigs_99:0.25,
    pigs_300:0.25,
    pigs_8:0.5,
    pigs_301:0.25,
    pigs_13:0.25,
    pigs_202:0.25,
    pigs_161:0.484375,
    pigs_367:0.25,
    pigs_186:0.25,
    pigs_107:0.5,
    pigs_3:0.25,
    pigs_15:0.25,
    pigs_311:0.484375,
    pigs_164:0.484375,
    pigs_146:0.46875,
    pigs_327:0.25,
    pigs_63:0.25,
    pigs_286:0.25,
    pigs_32:0.5,
    pigs_69:0.25,
    pigs_29:0.5,
    pigs_231:0.25,
    pigs_370:0.25,
    pigs_334:0.25,
    pigs_293:0.5,
    pigs_189:0.25,
    pigs_265:0.25,
    pigs_36:0.25,
    pigs_33:0.25,
    pigs_92:0.5,
    pigs_21:0.25,
    pigs_213:0.25,
    pigs_151:0.28125,
    pigs_125:0.484375,
    pigs_385:0.25,
    pigs_108:0.25,
    pigs_133:0.25,
    pigs_374:0.5,
    pigs_136:0.25,
    pigs_52:0.25,
    pigs_248:0.5,
    pigs_251:0.46875,
    pigs_269:0.5,
    pigs_193:0.25,
    pigs_122:0.484375,
    pigs_191:0.5,
    pigs_181:0.25,
    pigs_305:0.5,
    pigs_353:0.5,
    pigs_257:0.5,
    pigs_288:0.25,
    pigs_222:0.25,
    pigs_333:0.25,
    pigs_35:0.5,
    pigs_190:0.25,
    pigs_156:0.25,
    pigs_258:0.25,
    pigs_50:0.5,
    pigs_266:0.5,
    pigs_335:0.5,
    pigs_391:0.25,
    pigs_230:0.5,
    pigs_273:0.25,
    pigs_97:0.25,
    pigs_244:0.25,
    pigs_355:0.25,
    pigs_113:0.5,
    pigs_371:0.5,
    pigs_82:0.25,
    pigs_399:0.25,
    pigs_94:0.25,
    pigs_246:0.25,
    pigs_79:0.25,
    pigs_259:0.25,
    pigs_402:0.25,
    pigs_139:0.25,
    pigs_268:0.25,
    pigs_419:0.5,
    pigs_127:0.25,
    pigs_40:0.25,
    pigs_160:0.2578125,
    pigs_132:0.25,
    pigs_18:0.25,
    pigs_61:0.25,
    pigs_148:0.25,
    pigs_277:0.25,
    pigs_86:0.5,
    pigs_340:0.25,
    pigs_279:0.25,
    pigs_345:0.25,
    pigs_245:0.5,
    pigs_41:0.5,
    pigs_318:0.25,
    pigs_400:0.25,
    pigs_247:0.25,
    pigs_195:0.25,
    pigs_173:0.5,
    pigs_174:0.25,
    pigs_155:0.5,
    pigs_114:0.25,
    pigs_393:0.25,
    pigs_159:0.265625,
    pigs_73:0.25,
    pigs_352:0.25,
    pigs_314:0.5,
    pigs_223:0.25,
    pigs_260:0.5,
    pigs_232:0.25,
    pigs_150:0.25,
    pigs_331:0.25,
    pigs_369:0.25,
    pigs_382:0.25,
    pigs_2:0.5,
    pigs_383:0.5,
    pigs_20:0.5,
    pigs_270:0.25,
    pigs_215:0.5,
    pigs_100:0.25,
    pigs_375:0.25,
    pigs_31:0.25,
    pigs_37:0.25,
    pigs_262:0.25,
    pigs_87:0.25,
    pigs_299:0.5,
    pigs_72:0.25,
    pigs_25:0.25,
    pigs_112:0.25,
    pigs_75:0.25,
    pigs_200:0.5,
    pigs_364:0.25,
    pigs_291:0.25,
    pigs_294:0.25,
    pigs_272:0.5,
    pigs_78:0.25,
    pigs_281:0.5,
    pigs_298:0.25,
    pigs_179:0.5,
    pigs_384:0.25,
    pigs_65:0.484375,
    pigs_349:0.25,
    pigs_218:0.5,
    pigs_394:0.25,
    pigs_313:0.25,
    pigs_124:0.2578125,
    pigs_126:0.2578125,
    pigs_330:0.25,
    pigs_409:0.25,
    pigs_325:0.25,
    pigs_317:0.5,
    pigs_68:0.5,
    pigs_380:0.5,
    pigs_217:0.25,
    pigs_249:0.25,
    pigs_412:0.25,
    pigs_388:0.25,
    pigs_144:0.25,
    pigs_176:0.5,
    pigs_347:0.5,
    pigs_208:0.25,
    pigs_93:0.25,
    pigs_74:0.5,
    pigs_5:0.5,
    pigs_7:0.25,
    pigs_219:0.25,
    pigs_6:0.25,
    pigs_135:0.25,
    pigs_373:0.25,
    pigs_62:0.5,
    pigs_284:0.5,
    pigs_366:0.25,
    pigs_307:0.2578125,
    pigs_304:0.25,
    pigs_167:0.484375,
    pigs_106:0.25,
    pigs_319:0.25,
    pigs_290:0.5,
    pigs_54:0.25,
    pigs_187:0.25,
    pigs_194:0.5,
    pigs_253:0.25,
    pigs_398:0.5,
    pigs_103:0.25,
    pigs_368:0.5,
    pigs_26:0.5,
    pigs_422:0.5,
    pigs_203:0.5,
    pigs_261:0.25,
    pigs_275:0.5,
    pigs_64:0.2578125,
    pigs_1:0.25,
    pigs_390:0.25,
    pigs_376:0.25,
    pigs_379:0.25,
    pigs_423:0.25,
    pigs_178:0.25,
    pigs_297:0.25,
    pigs_162:0.2578125,
    pigs_149:0.5,
    pigs_350:0.5,
    pigs_172:0.25,
    pigs_199:0.25,
    pigs_396:0.25,
    pigs_255:0.25,
    pigs_357:0.25,
    pigs_316:0.25,
    pigs_140:0.5,
    pigs_27:0.25,
    pigs_207:0.25,
    pigs_413:0.5,
    pigs_336:0.25,
    pigs_417:0.25,
    pigs_188:0.5,
    pigs_306:0.25,
    pigs_80:0.5,
    pigs_411:0.25,
    pigs_96:0.25,
    pigs_407:0.5,
    pigs_180:0.25,
    pigs_152:0.4375,
    pigs_128:0.5,
    pigs_320:0.5,
    pigs_131:0.5,
    pigs_9:0.25,
    pigs_278:0.5,
    pigs_109:0.25,
    pigs_321:0.25,
    pigs_389:0.5,
    pigs_250:0.265625,
    pigs_216:0.25,
    pigs_39:0.25,
    pigs_416:0.5,
    pigs_212:0.5,
    pigs_415:0.25,
    pigs_76:0.25,
    pigs_378:0.25,
    pigs_185:0.5,
    pigs_386:0.5,
    pigs_177:0.25,
    pigs_34:0.25,
    pigs_38:0.5,
    pigs_56:0.5,
    pigs_102:0.25,
    pigs_209:0.5,
    pigs_310:0.2578125,
    pigs_276:0.25,
    pigs_141:0.25,
    pigs_225:0.25,
    pigs_42:0.25,
    pigs_211:0.25,
    pigs_66:0.2578125,
    pigs_280:0.25,
    pigs_332:0.5,
    pigs_137:0.5,
    pigs_153:0.28125,
    pigs_192:0.25,
    pigs_85:0.25,
    pigs_372:0.25,
    pigs_16:0.25,
    pigs_206:0.5,
    pigs_111:0.25,
    pigs_309:0.2578125,
    pigs_410:0.5,
    pigs_328:0.25,
    pigs_264:0.25,
    pigs_165:0.2578125,
    pigs_49:0.25,
    pigs_220:0.25,
    pigs_221:0.5,
    pigs_289:0.25,
    pigs_71:0.5,
    pigs_142:0.25,
    pigs_28:0.25,
    pigs_14:0.5,
    pigs_315:0.25,
    pigs_341:0.5,
    pigs_55:0.25,
    pigs_326:0.5,
    pigs_351:0.25,
    pigs_51:0.25,
    pigs_95:0.5,
    pigs_414:0.25,
    pigs_401:0.5,
    pigs_292:0.25,
    pigs_312:0.2578125,
    pigs_271:0.25,
    pigs_105:0.25,
    pigs_234:0.25,
    pigs_343:0.25,
    pigs_98:0.5,
    pigs_19:0.25,
    pigs_58:0.25,
    pigs_296:0.5,
    asia_4:0.5640294,
    asia_3:0.43597060000000004,
    asia_2:0.88970996,
    asia_1:0.11029004000000002,
    sachs_12:0.05320002410019898,
    sachs_10:0.8400913441873153,
    sachs_4:0.5394062847821939,
    sachs_11:0.1067086317124857,
    sachs_8:0.1441091315703085,
    sachs_3:0.08023205355751407,
    sachs_2:0.31037461849502496,
    sachs_5:0.3827686155448429,
    sachs_7:0.7386286352741057,
    sachs_6:0.07782509967296322,
    sachs_1:0.609393327947461,
    sachs_9:0.11726223315558573,
    earthquake_4:0.978881202,
    earthquake_3:0.021118798,
    earthquake_2:0.93630293,
    earthquake_1:0.06369707000000001,
    munin_254:0.0,
    munin_70:0.07029656826752691,
    munin_1090:0.0034255142888990958,
    munin_1189:1.917862500001717e-05,
    munin_860:6.159806853939711e-05,
    munin_1037:0.0,
    munin_1180:0.5156768280613538,
    munin_581:0.07778068286014202,
    munin_267:0.5,
    munin_403:0.0003309524656799883,
    munin_406:1.5579373809807467e-05,
    munin_583:0.0,
    munin_1525:0.0,
    munin_1528:0.0,
    munin_1179:0.28241891516043893,
    munin_862:3.055734951567347e-05,
    munin_77:3.071846032155576e-05,
    munin_302:9.801223243736559e-05,
    munin_303:0.0014397573138757403,
    munin_1524:0.06601708614029807,
    munin_1081:1.8118500006156533e-05,
    munin_67:0.08762223073331177,
    munin_408:3.29262009643506e-05,
    munin_1360:0.922219317139858,
    munin_263:0.5,
    munin_252:0.0,
    munin_308:0.023026506887562092,
    munin_1089:0.00679682941057363,
    munin_585:0.0,
    munin_1182:0.0032043613755422433,
    munin_301:1.8118500006156533e-05,
    munin_857:0.0009363643887526223,
    munin_697:0.8936149601208421,
    munin_367:0.09733825342495626,
    munin_858:0.0003338829586309185,
    munin_311:0.0018666876139422253,
    munin_582:0.0,
    munin_69:0.4224224098893866,
    munin_1087:0.10035092181217736,
    munin_370:0.0255234089156074,
    munin_265:0.5,
    munin_1036:0.09785576774991399,
    munin_856:0.07029656826752691,
    munin_743:0.9339829138597019,
    munin_1040:0.0,
    munin_1185:9.437303049625835e-05,
    munin_859:0.00029877111204229957,
    munin_374:0.00047315609567290625,
    munin_584:0.0,
    munin_251:0.0,
    munin_305:0.42413787950702425,
    munin_1151:0.0027831620201779973,
    munin_1150:0.0255234089156074,
    munin_266:0.5,
    munin_1088:0.023026506887562092,
    munin_1365:0.0,
    munin_864:1.9178625000017166e-05,
    munin_1526:0.0,
    munin_1523:0.9339829138597019,
    munin_371:0.0027831620201779973,
    munin_1147:0.09733825342495626,
    munin_399:0.28241891516043893,
    munin_1188:3.29262009643506e-05,
    munin_402:0.0032043613755422433,
    munin_268:0.5,
    munin_1038:0.0,
    munin_863:3.0718460321555755e-05,
    munin_1187:3.036656696712193e-05,
    munin_405:9.437303049625835e-05,
    munin_1039:0.0,
    munin_400:0.5156768280613538,
    munin_1091:0.0018666876139422253,
    munin_1148:0.5482056426529897,
    munin_73:0.0002987711120422995,
    munin_747:0.0,
    munin_369:0.31676146231686736,
    munin_1035:0.9021442322500861,
    munin_580:0.922219317139858,
    munin_72:0.0003338829586309185,
    munin_787:1.8118500006592704e-05,
    munin_1477:0.8936149601208421,
    munin_75:1.55347641451217e-05,
    munin_1082:9.801223243736559e-05,
    munin_78:1.9178625000017166e-05,
    munin_1527:0.0,
    munin_1181:0.1690195269935612,
    munin_1149:0.31676146231686736,
    munin_1362:0.0,
    munin_409:1.917862500001717e-05,
    munin_68:0.41793218538282706,
    munin_249:0.9021442322500861,
    munin_748:0.0,
    munin_74:6.159806853939711e-05,
    munin_1363:0.0,
    munin_307:0.10035092181217736,
    munin_304:0.09409817568739358,
    munin_745:0.0,
    munin_855:0.4224224098893866,
    munin_1184:0.00034905230160045254,
    munin_253:0.0,
    munin_398:0.028807939844585823,
    munin_368:0.5482056426529897,
    munin_1:1.8118500006592704e-05,
    munin_1152:0.003048022787866439,
    munin_861:1.55347641451217e-05,
    munin_1183:0.0003309524656799883,
    munin_746:0.0,
    munin_1154:0.00047315609567290625,
    munin_306:0.3440524079179556,
    munin_407:3.036656696712193e-05,
    munin_404:0.00034905230160045254,
    munin_1083:0.0014397573138757403,
    munin_250:0.09785576774991399,
    munin_76:3.055734951567347e-05,
    munin_1364:0.0,
    munin_1178:0.028807939844585823,
    munin_744:0.06601708614029807,
    munin_310:0.0034255142888990958,
    munin_853:0.08762223073331177,
    munin_1361:0.07778068286014202,
    munin_372:0.003048022787866439,
    munin_309:0.00679682941057363,
    munin_264:0.5,
    munin_71:0.0009363643887526223,
    munin_1086:0.3440524079179556,
    munin_1186:1.5579373809807467e-05,
    munin_1092:0.0006891888281529987,
    munin_401:0.1690195269935612,
    munin_1084:0.09409817568739358,
    munin_312:0.0006891888281529987,
    munin_1085:0.42413787950702425,
    munin_854:0.417932185382827,
    water_24:0.450033507842046,
    water_12:0.0,
    water_23:0.549966492157954,
    water_4:0.13953125,
    water_13:0.8488738318495586,
    water_3:0.268625,
    water_29:2.004399501712683e-08,
    water_2:0.39103125000000005,
    water_25:0.0,
    water_5:0.227456,
    water_7:0.227456,
    water_6:0.545088,
    water_1:0.2008125,
    water_14:0.15112616815044147,
    andes_12:0.37,
    andes_17:0.09000000000000001,
    andes_10:0.44,
    andes_4:0.98,
    andes_11:0.63,
    andes_30:0.4832,
    andes_8:0.2965226344767294,
    andes_13:0.63,
    andes_3:0.02,
    andes_29:0.5168,
    andes_18:0.91,
    andes_2:0.98,
    andes_5:0.02,
    andes_7:0.7034773655232707,
    andes_6:0.98,
    andes_1:0.02,
    andes_9:0.5599999999999999,
    andes_14:0.37,
    hepar2_24:0.9283099029633156,
    hepar2_70:0.7095971075426796,
    hepar2_90:0.16386470816274326,
    hepar2_84:0.13920724138033408,
    hepar2_22:0.7741198592275809,
    hepar2_12:0.4177142221907788,
    hepar2_83:0.7321857543587961,
    hepar2_10:0.26466380418426005,
    hepar2_23:0.07169009703668446,
    hepar2_4:0.5521798045640981,
    hepar2_57:0.9670958496804261,
    hepar2_11:0.73533619581574,
    hepar2_91:0.8361352918372567,
    hepar2_67:0.27475528515813297,
    hepar2_81:0.10973496190648292,
    hepar2_8:0.39055792591506,
    hepar2_13:0.5822857778092213,
    hepar2_3:0.9170240322103455,
    hepar2_15:0.6185967061319979,
    hepar2_63:0.1987035975786882,
    hepar2_32:0.5751073264608401,
    hepar2_69:0.2904028924573204,
    hepar2_33:0.11931844550504547,
    hepar2_92:0.003394185523050774,
    hepar2_21:0.22588014077241916,
    hepar2_82:0.26781424564120404,
    hepar2_88:0.0021477387782986605,
    hepar2_79:0.7539820469330614,
    hepar2_40:0.22288841005828885,
    hepar2_86:0.09320519105270811,
    hepar2_41:0.7771115899417111,
    hepar2_2:0.04434920059858947,
    hepar2_31:0.42489267353916,
    hepar2_87:0.9067948089472919,
    hepar2_25:0.21994154683030692,
    hepar2_75:0.21332918602281292,
    hepar2_65:0.018265709530653748,
    hepar2_68:0.7252447148418671,
    hepar2_93:0.9966058144769493,
    hepar2_5:0.44782019543590196,
    hepar2_89:0.9978522612217012,
    hepar2_62:0.05154287604202824,
    hepar2_26:0.7800584531696931,
    hepar2_64:0.7497535263792835,
    hepar2_1:0.03862676719106506,
    hepar2_27:0.14109553472886585,
    hepar2_80:0.13628299116045556,
    hepar2_9:0.60944207408494,
    hepar2_39:0.8635686698080516,
    hepar2_76:0.7866708139771871,
    hepar2_34:0.8806815544949544,
    hepar2_38:0.1364313301919484,
    hepar2_56:0.021459224890664,
    hepar2_66:0.9817342904693463,
    hepar2_85:0.8607927586196659,
    hepar2_28:0.8589044652711342,
    hepar2_14:0.381403293868002,
    hepar2_55:0.011444925428910001,
    win95pts_24:0.052095066712619535,
    win95pts_22:0.8894582059389688,
    win95pts_12:0.0076,
    win95pts_17:0.8982314,
    win95pts_10:0.0149,
    win95pts_23:0.9479049332873805,
    win95pts_4:0.914375275,
    win95pts_11:0.9924,
    win95pts_30:0.040949990500000005,
    win95pts_8:0.010444999555,
    win95pts_13:0.99161600384,
    win95pts_3:0.08562472500000001,
    win95pts_15:0.7052474034335073,
    win95pts_32:0.107999992,
    win95pts_29:0.9590500095,
    win95pts_21:0.11054179406103123,
    win95pts_18:0.10176860000000001,
    win95pts_20:0.11577346877914793,
    win95pts_31:0.892000008,
    win95pts_25:0.9790400096,
    win95pts_5:0.13778304157445004,
    win95pts_7:0.989555000445,
    win95pts_6:0.86221695842555,
    win95pts_26:0.0209599904,
    win95pts_27:0.9940100099,
    win95pts_9:0.9851,
    win95pts_16:0.2947525965664926,
    win95pts_28:0.0059899901,
    win95pts_14:0.00838399616,
    win95pts_19:0.884226531220852,
    cancer_4:0.6959295,
    cancer_3:0.3040705,
    cancer_2:0.7918590000000001,
    cancer_1:0.20814100000000002,
}

integration_tests! {
    water_supply_network,
    Net1_2_23: 1.0 - 0.826934,
    Net1_2_32: 1.0 - 0.669921,
    Net1_9_23: 1.0 - 0.710383,
    Net1_9_32: 1.0 - 0.710383,
    Net3_1_219: 1.0 - 0.134933,
    Net3_1_225: 1.0 - 0.134933,
    Net3_1_231: 1.0 - 0.190353,
    Net3_1_243: 1.0 - 0.134933,
    Net3_1_251: 1.0 - 0.162173,
    Net3_1_253: 1.0 - 0.103308,
    Net3_2_251: 1.0 - 0.669921,
    Net3_2_253: 1.0 - 0.669921,
    Net3_3_131: 1.0 - 0.586181,
    Net3_3_141: 1.0 - 0.512908,
    Net3_15_141: 1.0 - 0.765625,
    Net3_35_203: 1.0 - 0.392695,
    Net3_35_219: 1.0 - 0.216378,
    Net3_35_225: 1.0 - 0.216378,
    Net3_35_231: 1.0 - 0.305247,
    Net3_35_243: 1.0 - 0.216378,
    Net3_35_251: 1.0 - 0.260059,
    Net3_35_253: 1.0 - 0.165664,
    Net3_147_141: 1.0 - 0.765625,
    Net3_147_153: 1.0 - 0.669921,
    Net3_167_203: 1.0 - 0.491746,
    Net3_167_219: 1.0 - 0.247413,
    Net3_167_225: 1.0 - 0.247413,
    Net3_167_231: 1.0 - 0.349029,
    Net3_167_243: 1.0 - 0.247413,
    Net3_167_251: 1.0 - 0.297359,
    Net3_167_253: 1.0 - 0.189425,
}
